<html xmlns="http://www.w3.org/1999/html">
<head>
    <link rel="stylesheet" type="text/css" href="css/index.css">
    <title>MY ACCOUNT</title>
    <script type="text/javascript" charset="utf-8" src="cordova.js"></script>
    <script src="js/jquery-3.2.1.js"></script>
    <script src="js/vendor.js"></script>
    <title>MY ACCOUNT</title>
    <script type="text/javascript">
        var server_ip = localStorage.getItem("server_ip");
        var user_id = localStorage.getItem("user_id");
        var shop_id = localStorage.getItem("shop_id");

        $(document).ready(function () {
            $("#div-error").hide();
            var url = "http://"+server_ip+"Account/get_account.php";
            var data = get_account(url, user_id, shop_id);
            if (data.success)
            {
                $("#user_firstname").val(data.results[0].firstname);
                $("#user_lastname").val(data.results[0].lastname);
                $("#user_email").val(data.results[0].email);
                $("#user_birthdate").val(data.results[0].birthdate);
                $("#user_phone").val(data.results[0].user_phone);

                $("#shop_name").val(data.results[0].vendor_name);
                $("#shop_address").val(data.results[0].street);
                $("#shop_postcode").val(data.results[0].postcode);
                $("#shop_town").val(data.results[0].town);
                $("#shop_phone").val(data.results[0].shop_phone);
            }
            else
            {
                $("#div-error").html("<p>"+data.message+"</p>");
                $("#div-error").show();

            }

            $("#btn-update-account").click(function () {
                var user_firstname = $("#user_firstname").val();
                var user_lastname = $("#user_lastname").val();
                var user_email = $("#user_email").val();
                var user_birthdate = $("#user_birthdate").val();
                var user_phone = $("#user_phone").val();

                var shop_name = $("#shop_name").val();
                var shop_address = $("#shop_address").val();
                var shop_postcode = $("#shop_postcode").val();
                var shop_town = $("#shop_town").val();
                var shop_phone = $("#shop_phone").val();

                var url = "http://"+server_ip+"Account/update_account.php";
                var data = update_account(url, user_id, shop_id, user_firstname, user_lastname, user_email, user_birthdate, user_phone,
                    shop_name, shop_address, shop_postcode, shop_town, shop_phone);
                if (data.success)
                {
                    location.href="my_account.html";
                }
                else
                {
                    $("#div-error").html("<p>"+data.message+"</p>");
                    $("#div-error").show();
                }

            });
        });
    </script>
</head>
<body>
    <h1> MY ACCOUNT</h1>
    <div>
        <div id="div-user_infos">
            <p>
                <h2> USER INFORMATION</h2>
                <br>
                Firstname : <input type="text" id="user_firstname">
                <br>
                Lastname : <input type="text" id="user_lastname">
                <br>
                Email : <input type="email" id="user_email">
                <br>
                Birthdate : <input type="date" id="user_birthdate">
                <br>
                Phone : <input type="tel" id="user_phone">
                <br>
            </p>
        </div>
        <div id="div-shop_infos">
            <p>
                <h2> SHOP INFORMATION</h2>
                <br>
                Shopname : <input type="text" id="shop_name">
                <br>
                Address : <input type="text" id="shop_address">
                <br>
                PostCode: <input type="email" id="shop_postcode">
                Town : <input type="text" id="shop_town">
                <br>
                Phone : <input type="tel" id="shop_phone">
                <br>
            </p>
        </div>
        <button type="button" id="btn-update-account">UPDATE</button>
    </div>
    <div id="div-error">

    </div>
</body>
</html>